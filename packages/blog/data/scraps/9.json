{"number":9,"id":"I_kwDOK-znbM60difD","title":"OSSRH から Central Portal に移行する","body":"https://central.sonatype.org/news/20250326_ossrh_sunset/\n\nOSSRH(oss.sonatyp.org, s01.sonatype.org) が 2025/06/30 にサービス終了するので、後継の Central Portal へ移行する","state":"open","tags":["MavenCentral"],"originUrl":"https://github.com/yshrsmz/scraps/issues/9","createdAt":"2025-04-29T09:22:50Z","updatedAt":"2025-04-29T11:46:37Z","comments":[{"body":"サービスの移行自体はビルトインの移行機能使って自動でイケた\n\nhttps://central.sonatype.org/faq/what-is-different-between-central-portal-and-legacy-ossrh/#gradle\n\n現状は下記の制限がある模様\n\n> - Namespaces that have no more than 6 authorized publishers\n> - Namespaces that do not have parent or child namespaces\n","createdAt":"2025-04-29T10:02:00Z","updatedAt":"2025-04-29T10:10:35Z","id":"IC_kwDOK-znbM6pK1ri"},{"body":"API 利用には Central Portal のユーザートークンが必要\n\nhttps://central.sonatype.org/publish/generate-portal-token/\n\n","createdAt":"2025-04-29T10:10:19Z","updatedAt":"2025-04-29T10:10:19Z","id":"IC_kwDOK-znbM6pK6xD"},{"body":"BuildKonfig で利用している [vanniktech/gradle-maven-publish-plugin](https://github.com/vanniktech/gradle-maven-publish-plugin) は Central Portal をサポートしているので、そのまま使う\n\nhttps://vanniktech.github.io/gradle-maven-publish-plugin/central/\n\n基本的にレポジトリの向き先と認証情報だけ変えればいいらしい\n\n`gradle.properties` で設定していたのでこんな感じ\n\n```diff\n- SONATYPE_HOST=DEFAULT\n+ SONATYPE_HOST=CENTRAL_PORTAL\n```\n\n認証情報はよしなに変更する\n\n","createdAt":"2025-04-29T10:33:21Z","updatedAt":"2025-04-29T10:33:21Z","id":"IC_kwDOK-znbM6pLH6C"},{"body":"SNAPSHOT デプロイもしたい場合は、https://central.sonatype.com/publishing/namespaces から namespace を選択して個別に有効化する必要あり\n\n有効化せずに SNAPSHOT リリースしようとすると、下記のようなエラーが出る\n\n```\nExecution failed for task ':buildkonfig-gradle-plugin:publishBuildKonfigPluginMarkerMavenPublicationToMavenCentralRepository'.\n> Failed to publish publication 'buildKonfigPluginMarkerMaven' to repository 'mavenCentral'\n   > Could not PUT 'https://central.sonatype.com/repository/maven-snapshots/com/codingfeline/buildkonfig/com.codingfeline.buildkonfig.gradle.plugin/0.17.2-SNAPSHOT/com.codingfeline.buildkonfig.gradle.plugin-0.17.2-20250429.104211-1.pom'. Received status code 403 from server: Forbidden\n```\n\n参考: https://github.com/vanniktech/gradle-maven-publish-plugin/pull/894#issuecomment-2698536028","createdAt":"2025-04-29T11:42:22Z","updatedAt":"2025-04-29T11:46:36Z","id":"IC_kwDOK-znbM6pMAZs"}]}
