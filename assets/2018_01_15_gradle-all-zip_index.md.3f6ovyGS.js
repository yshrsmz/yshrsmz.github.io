import{_ as e,o as s,a as i,X as n}from"./chunks/framework.BPPv2K3c.js";const h=JSON.parse('{"title":"Gradleの更新時にall.zipを一発で取得する","description":"","frontmatter":{"layout":"post","title":"Gradleの更新時にall.zipを一発で取得する","category":"programming","tags":["TIL","gradle"],"head":[["link",{"rel":"canonical","href":"https://www.codingfeline.com/2018/01/15/gradle-all-zip/"}],["meta",{"property":"og:url","content":"https://www.codingfeline.com/2018/01/15/gradle-all-zip/"}],["meta",{"property":"og:title","content":"Gradleの更新時にall.zipを一発で取得する"}],["meta",{"property":"twitter:card","content":"summary_large_image"}],["meta",{"property":"twitter:site","content":"@_yshrsmz"}],["meta",{"property":"twitter:creator","content":"@_yshrsmz"}],["meta",{"property":"og:image","content":"https://www.codingfeline.com/2018/01/15/gradle-all-zip/ogp.png"}]]},"headers":[],"relativePath":"2018/01/15/gradle-all-zip/index.md","filePath":"posts/2018/2018-01-15-gradle-all-zip.md","date":{"time":"2018-01-15","string":"January 15, 2018","year":"2018","month":"01","day":"15"}}'),t={name:"2018/01/15/gradle-all-zip/index.md"};function p(l,a,r,d,o,c){return s(),i("div",null,[...a[0]||(a[0]=[n(`<p>普通に<code>gradlew wrapper --gradle-version=x.y.z</code>とコマンドを叩くと、取得されるGradleのzipファイルは<code>gradle-x.y.z-bin.zip</code>。<code>all.zip</code>を取得するにはAndroidStudioのサジェストに従うか、あるいは<code>gradle-wrapper.properties</code>を修正する必要がある。</p><p>最初からコマンドラインで<code>gradle-x.y.z-all.zip</code>を取得するには<code>build.gradle</code>ファイルに一手間必要</p><div class="language-groovy vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">groovy</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// rootのbuild.gradle</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">task wrapper(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">type</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">Wrapper</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  gradleVersion </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;x.y.z&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  distributionType </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;ALL&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>まあこれを設定しても今まで通り<code>wrapper</code>タスクを二度実行する必要があるのは変わらないけど、コマンドは短くなるし<code>all.zip</code>を取得し直す手間もなくなる。</p><p>Gradleの該当コードは<a href="https://github.com/gradle/gradle/blob/2a858684ee64e589d35d8a48da5b9c17a238385d/subprojects/build-init/src/main/java/org/gradle/api/tasks/wrapper/Wrapper.java#L311-L314" target="_blank" rel="noreferrer">このあたり</a></p><p><code>gradlew wrapper --gradle-version=x.y.z --distribution-type=ALL</code>とかやっても同じ動作になりそう。</p><h3 id="_2018-07-04追記" tabindex="-1">2018/07/04追記 <a class="header-anchor" href="#_2018-07-04追記" aria-label="Permalink to &quot;2018/07/04追記&quot;">​</a></h3><p>上の方法、Gradle5.0から使えなくなるらしく実行時に警告が出るようになっていた。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Deprecated Gradle features were used in this build, making it incompatible with Gradle 5.0.</span></span>
<span class="line"><span>See https://docs.gradle.org/4.8.1/userguide/command_line_interface.html#sec:command_line_warnings</span></span></code></pre></div><p>上記のようなメッセージが表示されるのみで最初はわからなかったんだけど、表示されるリンク先にあるように <code>--warning-mode=all</code> を指定して適当なタスクを実行してみたら詳細なエラーがでた。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Creating a custom task named &#39;wrapper&#39; has been deprecated and is scheduled to be removed in Gradle 5.0. You can configure the existing task using the &#39;wrapper { }&#39; syntax or create your custom task under a different name.&#39;.</span></span>
<span class="line"><span>        at build_b74mo1uay274dql3ctg39y5sg.run(/Users/user_name/repos/some_project/build.gradle:38)</span></span>
<span class="line"><span>        (Run with --stacktrace to get the full stack trace of this deprecation warning.)</span></span></code></pre></div><p>なるほど。</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>wrapper {</span></span>
<span class="line"><span>    gradleVersion = &#39;4.8.1&#39;</span></span>
<span class="line"><span>    //noinspection UnnecessaryQualifiedReference</span></span>
<span class="line"><span>    distributionType = Wrapper.DistributionType.ALL</span></span>
<span class="line"><span>}</span></span></code></pre></div><p>みたいに変更したらメッセージは消えた。</p>`,14)])])}const u=e(t,[["render",p]]);export{h as __pageData,u as default};
