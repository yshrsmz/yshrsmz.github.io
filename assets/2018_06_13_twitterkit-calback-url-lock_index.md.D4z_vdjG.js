import{_ as e,o as r,a as i,X as a}from"./chunks/framework.BPPv2K3c.js";const h=JSON.parse('{"title":"TwitterKit使ってるアプリでブラウザ経由のログインできなくなった件","description":"","frontmatter":{"layout":"post","title":"TwitterKit使ってるアプリでブラウザ経由のログインできなくなった件","category":"programming","tags":["TIL","Android","twitter"],"head":[["link",{"rel":"canonical","href":"https://www.codingfeline.com/2018/06/13/twitterkit-calback-url-lock/"}],["meta",{"property":"og:url","content":"https://www.codingfeline.com/2018/06/13/twitterkit-calback-url-lock/"}],["meta",{"property":"og:title","content":"TwitterKit使ってるアプリでブラウザ経由のログインできなくなった件"}],["meta",{"property":"twitter:card","content":"summary_large_image"}],["meta",{"property":"twitter:site","content":"@_yshrsmz"}],["meta",{"property":"twitter:creator","content":"@_yshrsmz"}],["meta",{"property":"og:image","content":"https://www.codingfeline.com/2018/06/13/twitterkit-calback-url-lock/ogp.png"}]]},"headers":[],"relativePath":"2018/06/13/twitterkit-calback-url-lock/index.md","filePath":"posts/2018/2018-06-13-twitterkit-calback-url-lock.md","date":{"time":"2018-06-13","string":"June 13, 2018","year":"2018","month":"06","day":"13"}}'),o={name:"2018/06/13/twitterkit-calback-url-lock/index.md"};function c(d,t,n,l,s,p){return r(),i("div",null,[...t[0]||(t[0]=[a('<p><a href="https://twittercommunity.com/t/action-required-sign-in-with-twitter-users-must-whitelist-callback-urls/105342" target="_blank" rel="noreferrer">前々から告知されていた</a>けど、2018/06/13にTwitter認証のコールバックURLをコード側で任意に変えることができなくなった。</p><p>TwitterKitはこの、コード側で任意にコールバックURLを変更できる仕様を前提として作られているので、当然のようにブラウザ経由でのログインができなくなってしまう。</p><p><a href="http://rskull.hateblo.jp/entry/2018/06/12/192337" target="_blank" rel="noreferrer">解決策書いてる人</a>もいて、それ試してみたけど動かなかったのでコード読んでみた。</p><h3 id="結論" tabindex="-1">結論 <a class="header-anchor" href="#結論" aria-label="Permalink to &quot;結論&quot;">​</a></h3><p>TwitterKit for iOSとTwitterKit for AndroidではコールバックURLの仕様が異なっているので、両方を <a href="https://apps.twitter.com" target="_blank" rel="noreferrer">https://apps.twitter.com</a> のコンソール上で指定する必要がある。</p><table tabindex="0"><thead><tr><th></th><th>url scheme</th><th>code</th></tr></thead><tbody><tr><td>TwitterKit for Android</td><td><code>twittersdk://</code></td><td><a href="https://github.com/twitter/twitter-kit-android/blob/c148862c612c66d0f2b50cac40adf4e3d287cb8b/twitter-core/src/main/java/com/twitter/sdk/android/core/internal/oauth/OAuth1aService.java#L59" target="_blank" rel="noreferrer">OAuth1aService.java#L59</a></td></tr><tr><td>TwitterKit for iOS</td><td><code>twitterkit-YOUR_CONSUMER_KEY://</code></td><td><a href="https://github.com/twitter/twitter-kit-ios/blob/2cd78d3d5783d998f6b5fde242d1dd69d32e385d/TwitterKit/TwitterKit/Social/Identity/TWTRLoginURLParser.m#L39" target="_blank" rel="noreferrer">TWTRLoginURLParser.m#L39</a></td></tr></tbody></table><p>TwitterKitも近いうちにサポートなくなってしまうのでなんとかしないとなあ…</p><h4 id="_2018-06-14-追記" tabindex="-1">2018/06/14 追記 <a class="header-anchor" href="#_2018-06-14-追記" aria-label="Permalink to &quot;2018/06/14 追記&quot;">​</a></h4><p>twitter-kit-iosのコードを眺めてたら、 コンソールから<code>twittersdk://</code>を設定しておけばそれで<a href="https://github.com/twitter/twitter-kit-ios/blob/b6eb49d149b056d826cbc4b53eaeb39a3ebd591e/TwitterKit/TwitterKit/Social/Identity/TWTRLoginURLParser.h#L34-L45" target="_blank" rel="noreferrer">動いてくれそうな記述があった</a>。<br> フォールバック的な挙動にも見えるけど、結論<code>twittersdk://</code>だけ設定しておけばよさそう。</p>',9)])])}const b=e(o,[["render",c]]);export{h as __pageData,b as default};
