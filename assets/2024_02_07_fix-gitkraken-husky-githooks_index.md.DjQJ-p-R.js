import{_ as i,o as a,a as h,X as k}from"./chunks/framework.BPPv2K3c.js";const g=JSON.parse('{"title":"GitKraken ã§ Husky ã® Git Hooks ã¨é€£æºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹","description":"","frontmatter":{"layout":"post","title":"GitKraken ã§ Husky ã® Git Hooks ã¨é€£æºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹","tags":["TIL","GitKraken","Git"],"head":[["link",{"rel":"canonical","href":"https://www.codingfeline.com/2024/02/07/fix-gitkraken-husky-githooks/"}],["meta",{"property":"og:url","content":"https://www.codingfeline.com/2024/02/07/fix-gitkraken-husky-githooks/"}],["meta",{"property":"og:title","content":"GitKraken ã§ Husky ã® Git Hooks ã¨é€£æºã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹"}],["meta",{"property":"twitter:card","content":"summary_large_image"}],["meta",{"property":"twitter:site","content":"@_yshrsmz"}],["meta",{"property":"twitter:creator","content":"@_yshrsmz"}],["meta",{"property":"og:image","content":"https://www.codingfeline.com/2024/02/07/fix-gitkraken-husky-githooks/ogp.png"}]]},"headers":[],"relativePath":"2024/02/07/fix-gitkraken-husky-githooks/index.md","filePath":"posts/2024/2024-02-07-fix-gitkraken-husky-githooks.md","date":{"time":"2024-02-07","string":"February 7, 2024","year":"2024","month":"02","day":"07"}}'),t={name:"2024/02/07/fix-gitkraken-husky-githooks/index.md"};function n(p,s,l,e,r,E){return a(),h("div",null,[...s[0]||(s[0]=[k(`<p>GitKraken ã‹ã‚‰ã€ Husky ã§è¨­å®šã—ãŸ Git Hooks ãŒå®Ÿè¡Œã•ã‚Œãªã„ä»¶</p><p><strong>ç›®æ¬¡</strong></p><nav class="table-of-contents"><ul><li><a href="#tl-tr">TL;TR</a></li><li><a href="#ã¨ã‚™ã†ã‚„ã‚‹">ã©ã†ã‚„ã‚‹</a></li></ul></nav><h2 id="tl-tr" tabindex="-1">TL;TR <a class="header-anchor" href="#tl-tr" aria-label="Permalink to &quot;TL;TR&quot;">â€‹</a></h2><p>GitKraken ã¯ç›¸å¯¾ãƒ‘ã‚¹ãª <code>core.hooksPath</code> ã«å¯¾å¿œã—ã¦ãªã„ã®ã§ã€çµ¶å¯¾ãƒ‘ã‚¹ã«ã™ã‚‹å¿…è¦ãŒã‚ã‚‹</p><h2 id="ã¨ã‚™ã†ã‚„ã‚‹" tabindex="-1">ã©ã†ã‚„ã‚‹ <a class="header-anchor" href="#ã¨ã‚™ã†ã‚„ã‚‹" aria-label="Permalink to &quot;ã©ã†ã‚„ã‚‹&quot;">â€‹</a></h2><p>ã“ã®è¾ºãŒå‚è€ƒã«ãªã‚‹</p><ul><li><a href="https://feedback.gitkraken.com/suggestions/191601/support-corehookspath" target="_blank" rel="noreferrer">Support core.hooksPath - GitKraken</a></li><li><a href="https://github.com/typicode/husky/issues/875" target="_blank" rel="noreferrer">Husky v5 and Gitkraken Â· Issue #875 Â· typicode/husky</a></li><li><a href="https://github.com/typicode/husky/issues/243" target="_blank" rel="noreferrer">Husky + GitKraken = ğŸ’¥ Â· Issue #243 Â· typicode/husky</a></li></ul><p>GitKraken ã® Git Hooks ã‚µãƒãƒ¼ãƒˆã¯æ©Ÿèƒ½ã®ãƒªãƒªãƒ¼ã‚¹å½“åˆã‹ã‚‰å£Šã‚Œã¦ã„ã¦ã€çµ¶å¯¾ãƒ‘ã‚¹ã—ã‹èªè­˜ã—ã¦ãã‚Œãªã„ã€‚</p><p>GitKraken ã® <code>Preferences &gt; Git Hooks</code> ã‹ã‚‰çµ¶å¯¾ãƒ‘ã‚¹ã«ä¿®æ­£ã—ãŸã‚‰ã¡ã‚ƒã‚“ã¨ pre-commit ãƒ•ãƒƒã‚¯ãªã©èµ°ã‚‹ã‚ˆã†ã«ãªã‚‹ã‚“ã ã‘ã©ã€ä¾å­˜é–¢ä¿‚æ›´æ–°ã—ãŸã‚Šã—ã¦ package.json ã® <code>prepare</code> ãƒ•ãƒƒã‚¯ãŒå®Ÿè¡Œã•ã‚Œã‚‹ã¨(ã ã„ãŸã„ã“ã“ã§ <code>husky</code> ã‚³ãƒãƒ³ãƒ‰å©ã„ã¦ husky ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ã‚‹ã¯ãš) <code>core.hooksPath</code> ãŒç›¸å¯¾ãƒ‘ã‚¹ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¦ã—ã¾ã†ã€‚</p><p>è§£æ±ºç­–ã¯ç°¡å˜ã§ã€ <code>husky</code> ã‚³ãƒãƒ³ãƒ‰ã«çµ¶å¯¾ãƒ‘ã‚¹ã§ <code>core.hooksPath</code> ã‚’è¨­å®šã•ã›ãŸã‚‰ã„ã„ã€‚</p><p>Husky ã®å®Ÿè£…ã‚’è¦‹ã‚‹ã¨ã€ã‚³ãƒãƒ³ãƒ‰ã®å¼•æ•°ã« hooks ã¸ã®ãƒ‘ã‚¹ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«ãªã£ã¦ã„ã‚‹</p><p><a href="https://github.com/typicode/husky/blob/095a4fefbb6b9e57f22bd96f3db0577f5ed427b3/index.mjs#L13" target="_blank" rel="noreferrer">https://github.com/typicode/husky/blob/095a4fefbb6b9e57f22bd96f3db0577f5ed427b3/index.mjs#L13</a></p><div class="language-js vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">d</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.husky&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (process.env.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">HUSKY</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> ===</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;0&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;HUSKY=0 skip install&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (d.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">includes</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;..&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;.. not allowed&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">f.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">existsSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.git&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> \`.git can&#39;t be found\`</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> _</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">x</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> p.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(d, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;_&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, x)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	let</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">status</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: s, </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">stderr</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: e } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> c.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">spawnSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;git&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;config&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;core.hooksPath&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`\${</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">d</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">}/_\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">])</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (s </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;git command not found&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (s) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> +</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> e</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	f.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mkdirSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), { recursive: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">true</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> })</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;.gitignore&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;*&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	f.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">copyFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> URL</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;husky&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">meta</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.url), </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;h&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">))</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">	l.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">forEach</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">h</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(h), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">\`#!/usr/bin/env sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\n</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">. &quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\$</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">{0%/*}/h&quot;\`</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, { mode: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0o755</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }))</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">	w</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">_</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;husky.sh&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">), </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">	return</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ãªã®ã§ package.json ã® prepare ãƒ•ãƒƒã‚¯ã‚’ä¸‹è¨˜ã®æ§˜ã«ä¿®æ­£ã—ã¦ã‚ã’ã‚‹ã¨ã€ <code>config.hooksPath</code> ã« GitKraken ã§ã‚‚èªè­˜ã§ãã‚‹çµ¶å¯¾ãƒ‘ã‚¹ãŒæ¸¡ã›ã‚‹</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;scripts&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">  &quot;prepare&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;husky </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">$(pwd)/.husky</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">\\&quot;</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p>ã‚‚ã†3å¹´ãã‚‰ã„æ”¾ç½®ã•ã‚Œã¦ã„ã‚‹å•é¡Œãªã®ã§ã€ãã‚ãã‚ä¿®æ­£ã—ã¦ã»ã—ã„</p>`,17)])])}const y=i(t,[["render",n]]);export{g as __pageData,y as default};
